node.js 是一个js运行vm，但是我们知道，jvm肯定包含了很多的组成部分的，jvm的虚拟机大部分都是hotsopt，node.js 的虚拟机就是v8, v8和hotsopt的主要开发人员其实一样😂。

所以，在v8中，java虚拟机的概念也都可以看到，不过java虚拟机中的理论都是经过多年迭代过后的结果，不仅仅在java虚拟机中有应用，在go等各类语言中也有应用。

v8和hotspot最大的区别是，js虚拟机是解释执行的，而java虚拟机是将整个类直接加载到内存中，所以js的性能要绍弱于ava虚拟机的。v8 也采用了堆来管理所有的对象，也有新生代和老年代的划分，这些堆的大小也可以指定。默认是当堆内存超过80%后就会触发GC。但是v8默认的堆内存并不是很大，是因为v8被设计的目的一开始是用于浏览器的。

node 被发明出来的目的是要做一个非堵塞的系统，所有的i/o都是异步的。对于操作系统而言，只有堵塞和非堵塞，异步是要程序自己实现的，v8的用户线程是单线程，但是运行的时候是多线程的，其他线程用于实现异步，不断的轮询i/o请求的结果。

虽然node的用户代码是单线程的，但是可以通过创建类似浏览器的子进程来达到多线程的目的，但是这个一般只作为池化管理，并不会让一个请求单独生成一个线程，这太消耗性能了。

v8和hotsopt都并没有提供系统函数，类似tcp这样的工具，这些实现都是依靠扩展c++二进制代码库，直接调用的，vm只是一个解释代码的引擎。在v8中这个机制叫做C++ Addons，Java中叫做JNI，正式由于这样的机制，才有了丰富的库函数支持。